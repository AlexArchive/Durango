using System.Diagnostics;
using Framework.Common;

namespace Framework.Services
{
    public class AchievementsService : ServiceBase
    {
        private const string BaseAddress = "https://live.xbox.com/en-US/Activity/Details?titleId=";

        public AchievementsService(string username, string password) 
            : base(username, password)
        {
        }

        public void GetAchievements(string gamertag, string gameId)
        {
            EnsureAuthenticated();

            var content = WebAgent.GetString(BaseAddress + gameId + "&compareto=" + gamertag);

            var json = content.ParseBetween("broker.publish(routes.activity.details.load, ", ");");

            Debugger.Break();

        }

    }
}